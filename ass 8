import java.sql.*;
import java.util.*;

public class SimpleMenuCRUD {
    public static void main(String[] args) throws Exception {

        // Load MySQL Driver
        Class.forName("com.mysql.cj.jdbc.Driver");

        // Connect to Database (change these)
        Connection con = DriverManager.getConnection(
            "jdbc:mysql://10.10.8.119:3306/yourDatabaseName?useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=UTC",
            "te31177",
            "yourPassword"
        );

        Scanner sc = new Scanner(System.in);
        Statement st = con.createStatement();

        // Create table if not exists
        st.executeUpdate("CREATE TABLE IF NOT EXISTS students(name VARCHAR(50), marks INT, city VARCHAR(50))");

        int choice = 0;
        while (choice != 5) {
            System.out.println("\n==== MENU ====");
            System.out.println("1. Insert student");
            System.out.println("2. Show all students");
            System.out.println("3. Update marks");
            System.out.println("4. Delete student");
            System.out.println("5. Exit");
            System.out.print("Enter choice: ");
            choice = sc.nextInt();

            switch (choice) {
                case 1:
                    System.out.print("Enter name: ");
                    String name = sc.next();
                    System.out.print("Enter marks: ");
                    int marks = sc.nextInt();
                    System.out.print("Enter city: ");
                    String city = sc.next();

                    st.executeUpdate("INSERT INTO students VALUES ('" + name + "'," + marks + ",'" + city + "')");
                    System.out.println("Record inserted successfully!");
                    break;

                case 2:
                    ResultSet rs = st.executeQuery("SELECT * FROM students");
                    System.out.println("\nName\tMarks\tCity");
                    while (rs.next()) {
                        System.out.println(rs.getString(1) + "\t" + rs.getInt(2) + "\t" + rs.getString(3));
                    }
                    break;

                case 3:
                    System.out.print("Enter name to update: ");
                    String uname = sc.next();
                    System.out.print("Enter new marks: ");
                    int newMarks = sc.nextInt();
                    st.executeUpdate("UPDATE students SET marks=" + newMarks + " WHERE name='" + uname + "'");
                    System.out.println("Record updated!");
                    break;

                case 4:
                    System.out.print("Enter name to delete: ");
                    String dname = sc.next();
                    st.executeUpdate("DELETE FROM students WHERE name='" + dname + "'");
                    System.out.println("Record deleted!");
                    break;

                case 5:
                    System.out.println("Exiting...");
                    break;

                default:
                    System.out.println("Invalid choice!");
            }
        }

        st.close();
        con.close();
        sc.close();
    }
}


